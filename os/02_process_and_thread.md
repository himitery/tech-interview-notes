# Process & Thread

## ✅ 프로세스(Process)란?

운영체제에서 실행 중인 프로그램을 의미하며, 독립적인 자원(메모리 공간, 파일 디스크립터, 스택 등)을 할당받아 실행됨.

- 실행 중인 프로그램의 인스턴스
- 고유한 프로세스 ID(PID)를 가짐
- 각각 독립된 주소 공간 사용
- 최소 하나 이상의 스레드를 가짐

### 프로세스 상태

- New: 생성 중
- Ready: 실행 대기 중
- Running: CPU 할당됨
- Waiting: I/O 등 이벤트 대기
- Terminated: 실행 종료됨

### 프로세스 구조 (메모리)

- **텍스트(Text)**: 실행 코드
- **데이터(Data)**: 전역 변수, 정적 변수
- **힙(Heap)**: 동적 메모리 할당 영역
- **스택(Stack)**: 함수 호출, 지역 변수 저장

## ✅ 스레드(Thread)란?

프로세스 내에서 실행되는 실행 흐름 단위. 한 프로세스는 여러 개의 스레드를 가질 수 있음 (멀티스레딩).

- 같은 프로세스 내에서 코드, 데이터, 힙 영역을 공유
- 각 스레드는 독립적인 레지스터와 스택을 가짐
- 스레드 간 데이터 공유가 쉬우나 동기화 이슈 존재

### 장점

- 메모리 공유로 인한 낮은 오버헤드
- 병렬 처리 가능성 향상 (멀티코어 환경에서 유리)

### 단점

- 동기화 문제 발생 가능 (Race Condition)
- 한 스레드의 예외가 전체 프로세스에 영향을 줄 수 있음

## ✅ 프로세스 vs 스레드

| 구분      | 프로세스                            | 스레드                      |
| --------- | ----------------------------------- | --------------------------- |
| 메모리    | 독립된 주소 공간 사용               | 메모리 영역 공유            |
| 생성 비용 | 높음                                | 낮음                        |
| 통신      | IPC 등 복잡한 방법 필요             | 간단 (공유 변수 등)         |
| 안정성    | 하나 죽어도 다른 프로세스 영향 없음 | 하나 오류 시 전체 영향 가능 |

## ✅ 멀티프로세싱 vs 멀티스레딩

- **멀티프로세싱**: 여러 프로세스를 동시에 실행 (CPU 활용 극대화, 격리성 높음)
- **멀티스레딩**: 하나의 프로세스 내 여러 스레드를 동시에 실행 (자원 효율성 높음)

### 선택 기준

- 독립성이 필요한 작업 → 멀티프로세싱
- 데이터 공유 및 경량 처리 → 멀티스레딩

## ✅ 문맥 교환(Context Switching)

CPU가 한 프로세스 또는 스레드에서 다른 것으로 전환될 때 현재 상태를 저장하고 새로운 상태를 로드하는 과정

- PCB(Process Control Block) 또는 TCB(Thread Control Block)에 상태 저장
- 레지스터, 프로그램 카운터, 스택 포인터 등을 저장/복구
- 오버헤드가 발생하므로 최소화 필요

### 문맥 교환 발생 시점

- 선점형 스케줄러에 의한 강제 전환
- 시스템 콜(I/O 등)로 인한 블로킹
- 타이머 인터럽트

## ✅ 사용자 수준 vs 커널 수준 스레드

| 구분           | 사용자 수준 스레드           | 커널 수준 스레드        |
| -------------- | ---------------------------- | ----------------------- |
| 관리 주체      | 사용자 라이브러리            | 운영체제 커널           |
| 문맥 교환 속도 | 빠름                         | 느림 (시스템 콜 포함)   |
| 병렬 처리      | 불가능 (한 번에 하나만 실행) | 가능 (멀티코어 활용)    |
| 예:            | green thread, coroutine      | POSIX thread (pthreads) |
